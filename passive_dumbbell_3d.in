dimension 3
units lj

# Parameters
variable rho      equal 0.1
variable T        equal 1.0
variable length   equal 20
variable sigma    equal 1.122 # for LJ potential
variable damp     equal 0.5

# Molecule setup
atom_style bond
bond_style harmonic
comm_modify vel yes cutoff 2
# newton bonds thing?

lattice sc ${rho}
region r block 0 ${length} 0 ${length} 0 ${length}
create_box 1 r bond/types 1 extra/bond/per/atom 1

molecule dumbbell dumbbell.txt
create_atoms 0 region r mol dumbbell 42

bond_coeff 1 50 0 # the first number is the bond_type (made up by us), which also appears in the molecule file.
mass 1 1
# pair_style      lj/cut ${sigma}
# pair_coeff      * * 1 1

fix 1 all nve
fix 2 all langevin $T $T ${damp} 42
# compute temp_compute all temp/partial 
# fix_modify 2 temp temp_compute [x y z] # <-- necessary if we have some center of mass movement by the forces, or maybe also in shear flow.

variable vx equal vcm(all, x)
variable vy equal vcm(all, y)
variable vz equal vcm(all, z)

velocity all create $T 196883
thermo 1000
thermo_style custom step temp press etotal v_vx v_vy v_vz
timestep 0.001
run 10000
